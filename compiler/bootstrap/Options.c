
// this is autogenerated file, do not edit it.
#include "ficus/ficus.h"

typedef enum {
   _FX_Nt6option_None=0, _FX_Nt6option_Some=1
} _fx_Nt6option_tag_t;

typedef struct _fx_Nt6option1i {
   int tag;
   union {
      int_ Some;
   } u;
} _fx_Nt6option1i;

typedef struct _fx_LS_data_t {
   int_ rc;
   struct _fx_LS_data_t* tl;
   fx_str_t hd;
} _fx_LS_data_t, *_fx_LS;

typedef struct _fx_Ta2S {
   fx_str_t t0;
   fx_str_t t1;
} _fx_Ta2S;

typedef struct _fx_FPS1B {
   int (*fp)(bool, fx_str_t*, void*);
   fx_fcv_t* fcv;
} _fx_FPS1B;

typedef struct _fx_R18Options__options_t {
   struct _fx_LS_data_t* app_args;
   fx_str_t app_filename;
   bool arch64;
   bool force_rebuild;
   fx_str_t build_dir;
   fx_str_t build_rootdir;
   fx_str_t cflags;
   fx_str_t clibs;
   bool compile_by_cpp;
   fx_str_t filename;
   bool gen_c;
   struct _fx_LS_data_t* include_path;
   bool debug;
   int_ optim_iters;
   int_ inline_thresh;
   bool enable_openmp;
   bool relax;
   bool use_preamble;
   bool make_app;
   int_ optimize_level;
   fx_str_t output_name;
   bool print_ast0;
   bool print_ast;
   bool print_k0;
   bool print_k;
   bool print_tokens;
   bool run_app;
   bool verbose;
   bool W_unused;
} _fx_R18Options__options_t;

typedef struct {
   int_ rc;
   int_ data;
} _fx_E4Exit_data_t;

typedef struct {
   int_ rc;
   fx_str_t data;
} _fx_E4Fail_data_t;

static void _fx_free_LS(struct _fx_LS_data_t** dst)
{
   FX_FREE_LIST_IMPL(_fx_LS, fx_free_str);
}

static int _fx_cons_LS(fx_str_t* hd, struct _fx_LS_data_t* tl, bool addref_tl, struct _fx_LS_data_t** fx_result)
{
   FX_MAKE_LIST_IMPL(_fx_LS, fx_copy_str);
}

static void _fx_free_Ta2S(struct _fx_Ta2S* dst)
{
   fx_free_str(&dst->t0);
   fx_free_str(&dst->t1);
}

static void _fx_copy_Ta2S(struct _fx_Ta2S* src, struct _fx_Ta2S* dst)
{
   fx_copy_str(&src->t0, &dst->t0);
   fx_copy_str(&src->t1, &dst->t1);
}

static void _fx_make_Ta2S(fx_str_t* t0, fx_str_t* t1, struct _fx_Ta2S* fx_result)
{
   fx_copy_str(t0, &fx_result->t0);
   fx_copy_str(t1, &fx_result->t1);
}

static void _fx_free_R18Options__options_t(struct _fx_R18Options__options_t* dst)
{
   _fx_free_LS(&dst->app_args);
   fx_free_str(&dst->app_filename);
   fx_free_str(&dst->build_dir);
   fx_free_str(&dst->build_rootdir);
   fx_free_str(&dst->cflags);
   fx_free_str(&dst->clibs);
   fx_free_str(&dst->filename);
   _fx_free_LS(&dst->include_path);
   fx_free_str(&dst->output_name);
}

static void _fx_copy_R18Options__options_t(struct _fx_R18Options__options_t* src, struct _fx_R18Options__options_t* dst)
{
   FX_COPY_PTR(src->app_args, &dst->app_args);
   fx_copy_str(&src->app_filename, &dst->app_filename);
   dst->arch64 = src->arch64;
   dst->force_rebuild = src->force_rebuild;
   fx_copy_str(&src->build_dir, &dst->build_dir);
   fx_copy_str(&src->build_rootdir, &dst->build_rootdir);
   fx_copy_str(&src->cflags, &dst->cflags);
   fx_copy_str(&src->clibs, &dst->clibs);
   dst->compile_by_cpp = src->compile_by_cpp;
   fx_copy_str(&src->filename, &dst->filename);
   dst->gen_c = src->gen_c;
   FX_COPY_PTR(src->include_path, &dst->include_path);
   dst->debug = src->debug;
   dst->optim_iters = src->optim_iters;
   dst->inline_thresh = src->inline_thresh;
   dst->enable_openmp = src->enable_openmp;
   dst->relax = src->relax;
   dst->use_preamble = src->use_preamble;
   dst->make_app = src->make_app;
   dst->optimize_level = src->optimize_level;
   fx_copy_str(&src->output_name, &dst->output_name);
   dst->print_ast0 = src->print_ast0;
   dst->print_ast = src->print_ast;
   dst->print_k0 = src->print_k0;
   dst->print_k = src->print_k;
   dst->print_tokens = src->print_tokens;
   dst->run_app = src->run_app;
   dst->verbose = src->verbose;
   dst->W_unused = src->W_unused;
}

static void _fx_make_R18Options__options_t(
   struct _fx_LS_data_t* r_app_args,
   fx_str_t* r_app_filename,
   bool r_arch64,
   bool r_force_rebuild,
   fx_str_t* r_build_dir,
   fx_str_t* r_build_rootdir,
   fx_str_t* r_cflags,
   fx_str_t* r_clibs,
   bool r_compile_by_cpp,
   fx_str_t* r_filename,
   bool r_gen_c,
   struct _fx_LS_data_t* r_include_path,
   bool r_debug,
   int_ r_optim_iters,
   int_ r_inline_thresh,
   bool r_enable_openmp,
   bool r_relax,
   bool r_use_preamble,
   bool r_make_app,
   int_ r_optimize_level,
   fx_str_t* r_output_name,
   bool r_print_ast0,
   bool r_print_ast,
   bool r_print_k0,
   bool r_print_k,
   bool r_print_tokens,
   bool r_run_app,
   bool r_verbose,
   bool r_W_unused,
   struct _fx_R18Options__options_t* fx_result)
{
   FX_COPY_PTR(r_app_args, &fx_result->app_args);
   fx_copy_str(r_app_filename, &fx_result->app_filename);
   fx_result->arch64 = r_arch64;
   fx_result->force_rebuild = r_force_rebuild;
   fx_copy_str(r_build_dir, &fx_result->build_dir);
   fx_copy_str(r_build_rootdir, &fx_result->build_rootdir);
   fx_copy_str(r_cflags, &fx_result->cflags);
   fx_copy_str(r_clibs, &fx_result->clibs);
   fx_result->compile_by_cpp = r_compile_by_cpp;
   fx_copy_str(r_filename, &fx_result->filename);
   fx_result->gen_c = r_gen_c;
   FX_COPY_PTR(r_include_path, &fx_result->include_path);
   fx_result->debug = r_debug;
   fx_result->optim_iters = r_optim_iters;
   fx_result->inline_thresh = r_inline_thresh;
   fx_result->enable_openmp = r_enable_openmp;
   fx_result->relax = r_relax;
   fx_result->use_preamble = r_use_preamble;
   fx_result->make_app = r_make_app;
   fx_result->optimize_level = r_optimize_level;
   fx_copy_str(r_output_name, &fx_result->output_name);
   fx_result->print_ast0 = r_print_ast0;
   fx_result->print_ast = r_print_ast;
   fx_result->print_k0 = r_print_k0;
   fx_result->print_k = r_print_k;
   fx_result->print_tokens = r_print_tokens;
   fx_result->run_app = r_run_app;
   fx_result->verbose = r_verbose;
   fx_result->W_unused = r_W_unused;
}

_fx_R18Options__options_t _fx_g12Options__opt = {  };
bool _fx_g18Options__is_arch64 = 
(bool)(sizeof(void*) > 4)
;
FX_EXTERN_C_VAL(struct _fx_LS_data_t* _fx_g9Sys__argv)
FX_EXTERN_C int _fx_M8FilenameFM5splitTa2S1S(fx_str_t* path_0, struct _fx_Ta2S* fx_result, void* fx_fv);

FX_EXTERN_C_VAL(fx_str_t _fx_g21__ficus_version_str__)
FX_EXTERN_C_VAL(fx_str_t _fx_g20__ficus_git_commit__)
FX_EXTERN_C void _fx_F12print_stringv1S(fx_str_t* a, void* fx_fv);

FX_EXTERN_C int _fx_M3SysFM6getcwdS0(fx_str_t* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_M4ListFM2tlLS1LS(struct _fx_LS_data_t* param_0, struct _fx_LS_data_t** fx_result, void* fx_fv);

FX_EXTERN_C void _fx_M6StringFM6to_intNt6option1i1S(fx_str_t* a, struct _fx_Nt6option1i* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_F6stringS1S(fx_str_t* a_0, fx_str_t* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_F7printlnv1S(fx_str_t* a_0, void* fx_fv);

FX_EXTERN_C int _fx_F7__add__LS2LSLS(
   struct _fx_LS_data_t* l1_0,
   struct _fx_LS_data_t* l2_0,
   struct _fx_LS_data_t** fx_result,
   void* fx_fv);

FX_EXTERN_C bool _fx_M6StringFM10startswithB2SS(fx_str_t* s, fx_str_t* prefix, void* fx_fv);

FX_EXTERN_C int _fx_M4ListFM3memB2LSS(struct _fx_LS_data_t* l_0, fx_str_t* a_0, bool* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_F6stringS1LS(struct _fx_LS_data_t* l_0, fx_str_t* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_F3maxi2ii(int_ a_0, int_ b_0, int_* fx_result, void* fx_fv);

FX_EXTERN_C_VAL(struct _fx_FPS1B _fx_g11Sys__osname)
FX_EXTERN_C int _fx_M3SysFM10cc_versionS0(fx_str_t* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_M8FilenameFM9normalizeS2SS(fx_str_t* dir_0, fx_str_t* fname_0, fx_str_t* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_M8FilenameFM8basenameS1S(fx_str_t* path_0, fx_str_t* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_M8FilenameFM16remove_extensionS1S(fx_str_t* path_0, fx_str_t* fx_result, void* fx_fv);

FX_EXTERN_C int _fx_M4ListFM3revLS1LS(struct _fx_LS_data_t* l_0, struct _fx_LS_data_t** fx_result, void* fx_fv);

FX_EXTERN_C int _fx_M7OptionsFM15default_optionsRM9options_t0(struct _fx_R18Options__options_t* fx_result, void* fx_fv)
{
   int fx_status = 0;
   fx_str_t slit_0 = FX_MAKE_STR("");
   fx_str_t slit_1 = FX_MAKE_STR("");
   fx_str_t slit_2 = FX_MAKE_STR("");
   fx_str_t slit_3 = FX_MAKE_STR("");
   fx_str_t slit_4 = FX_MAKE_STR("");
   fx_str_t slit_5 = FX_MAKE_STR("");
   fx_str_t slit_6 = FX_MAKE_STR("");
   _fx_make_R18Options__options_t(0, &slit_0, true, false, &slit_1, &slit_2, &slit_3, &slit_4, false, &slit_5, true, 0, false,
      0, 100, true, false, true, true, 1, &slit_6, false, false, false, false, false, false, false, true, fx_result);
   return fx_status;
}

FX_EXTERN_C int _fx_M7OptionsFM10print_helpv1B(bool detailed_0, void* fx_fv)
{
   fx_str_t v_0 = {  };
   _fx_Ta2S v_1 = {  };
   fx_str_t fxname_0 = {  };
   fx_str_t v_2 = {  };
   fx_str_t v_3 = {  };
   fx_str_t v_4 = {  };
   int fx_status = 0;
   if (_fx_g9Sys__argv != 0) {
      fx_copy_str(&_fx_g9Sys__argv->hd, &v_0);
   }
   else {
      FX_FAST_THROW(FX_EXN_NullListError, _fx_cleanup);
   }
   FX_CHECK_EXN(_fx_cleanup);
   FX_CALL(_fx_M8FilenameFM5splitTa2S1S(&v_0, &v_1, 0), _fx_cleanup);
   fx_copy_str(&v_1.t1, &fxname_0);
   fx_str_t slit_0 = FX_MAKE_STR("Ficus compiler v");
   fx_str_t slit_1 = FX_MAKE_STR(" (git ");
   fx_str_t slit_2 = FX_MAKE_STR(")");
   {
      const fx_str_t strs_0[] = { slit_0, _fx_g21__ficus_version_str__, slit_1, _fx_g20__ficus_git_commit__, slit_2 };
      FX_CALL(fx_strjoin(0, 0, 0, strs_0, 5, &v_2), _fx_cleanup);
   }
   _fx_F12print_stringv1S(&v_2, 0);
   fx_str_t slit_3 = FX_MAKE_STR("\n");
   _fx_F12print_stringv1S(&slit_3, 0);
   if (!detailed_0) {
      fx_str_t slit_4 = FX_MAKE_STR("\nUsage: ");
      fx_str_t slit_5 =
         FX_MAKE_STR(
            " [-pr-tokens | -pr-ast0 | -pr-ast | -pr-k0 | -pr-k | -no-c\n    | -app | -run | -O0 | -O1 | -O3 | -inline-threshold <n> | -no-openmp\n    | -o <output_name> | -I <incdir> | -B <build_root>\n    | -c++ | -cflags <cflags> | -clibs <clibs>\n    | -verbose | -h | -v ] <input_file>.fx [-- <app_args ...>]\n\nRun \'");
      fx_str_t slit_6 = FX_MAKE_STR(" -h\' to get more detailed help");
      {
         const fx_str_t strs_1[] = { slit_4, fxname_0, slit_5, fxname_0, slit_6 };
         FX_CALL(fx_strjoin(0, 0, 0, strs_1, 5, &v_3), _fx_cleanup);
      }
      _fx_F12print_stringv1S(&v_3, 0);
      fx_str_t slit_7 = FX_MAKE_STR("\n");
      _fx_F12print_stringv1S(&slit_7, 0);
   }
   else {
      fx_str_t slit_8 = FX_MAKE_STR("\nUsage: ");
      fx_str_t slit_9 =
         FX_MAKE_STR(
            " [options ...] <input_file.fx> [-- <app_args ...>]\n\nwhere options can be some of:\n    -rebuild        Ignore cached files; rebuild everything from scratch\n    -pr-tokens      Print all the tokens in parsed files\n    -pr-ast0        Print AST right after parsing\n    -pr-ast         Print typechecked AST of the parsed files\n    -pr-k0          Print just generated K-form\n    -pr-k           Print optimized K-form of the parsed files\n                    (only a part of the generated K-form is retained\n                    because of the dead code elimination step)\n    -no-c           Do not generate C code\n    -app            Build application (default mode)\n    -run            Build application and run it\n    -O0             Optimization level 0: disable all optimizations\n                                         except for the most essential ones\n    -O1             Optimization level 1 (default): enable most of the optimizations\n    -O3             Optimization level 3: enable all optimizations\n    -no-openmp      Disable OpenMP (OpenMP is enabled by default)\n    -debug          Turn on debug information, disable optimizations\n                    (but it can be overwritten with further -On)\n    -optim-iters    The number of optimization iterations to perform (2 or 3 by default, depending on -O<n>)\n    -inline-threshold  Inline threshold (100 by default); the higher it is,\n                    the bigger functions are inlined;\n                    --inline-thresh=0 disables inline expansion\n    -relax          Do not require explicit typing of all global functions\' parameters\n    -no-preamble    Do not auto-import \'Builtins\', \'List\', \'String\' and\n                    a few other standard modules into each compiled module.\n    -Wno-unused     Do not report errors about unused values/functions\n    -o <output_name> Output file name (by default it matches the\n                    input filename without .fx extension)\n    -I <dir>        Add specified directory to the module search path\n    -B <build_root> Specifies the parent directory <build_root> where subdirectory\n                    <build_root>/__fxbuild__/<app_build_dir> with the generated files will be created.\n                    By default, <build_root> is the current working directory.\n    -c++            Use C++ compiler instead of C to compile the generated sources.\n                    \'pragma \"c++\"\' in .fx file also instructs ficus compiler to use C++.\n    -cflags <cflags> Pass the specified flags, e.g. \"-mavx2\", to C/C++ compiler.\n                    If environment variable FICUS_CFLAGS is set,\n                    its value is inserted before <cflags>\n    -clibs <clibs>  Pass the specified libs/linker flags to C/C++ compiler.\n                    If environment variable FICUS_LINK_LIBRARIES is set,\n                    its value is inserted after <clibs>\n    -verbose        Display various info during the build\n    -h or -help or --help  Display this information\n    -v or -version  Display information about compiler and the platform, then exit.\n    --              Specify the application parameters when \'-run\' flag is used,\n                    e.g. \'./ficus -run myprog.fx -- arg1 arg2\'\n");
      {
         const fx_str_t strs_2[] = { slit_8, fxname_0, slit_9 };
         FX_CALL(fx_strjoin(0, 0, 0, strs_2, 3, &v_4), _fx_cleanup);
      }
      _fx_F12print_stringv1S(&v_4, 0);
      fx_str_t slit_10 = FX_MAKE_STR("\n");
      _fx_F12print_stringv1S(&slit_10, 0);
   }

_fx_cleanup: ;
   FX_FREE_STR(&v_0);
   _fx_free_Ta2S(&v_1);
   FX_FREE_STR(&fxname_0);
   FX_FREE_STR(&v_2);
   FX_FREE_STR(&v_3);
   FX_FREE_STR(&v_4);
   return fx_status;
}

FX_EXTERN_C int _fx_M7OptionsFM13parse_optionsB0(bool* fx_result, void* fx_fv)
{
   _fx_R18Options__options_t v_0 = {  };
   fx_str_t curr_dir_0 = {  };
   _fx_LS args_0 = 0;
   fx_str_t inputfile_0 = {  };
   _fx_LS v_1 = 0;
   fx_str_t v_2 = {  };
   fx_str_t v_3 = {  };
   fx_str_t v_4 = {  };
   fx_str_t v_5 = {  };
   fx_str_t v_6 = {  };
   fx_str_t v_7 = {  };
   fx_str_t v_8 = {  };
   fx_str_t v_9 = {  };
   fx_str_t v_10 = {  };
   fx_str_t v_11 = {  };
   fx_str_t v_12 = {  };
   fx_str_t v_13 = {  };
   fx_str_t v_14 = {  };
   fx_str_t v_15 = {  };
   fx_str_t v_16 = {  };
   fx_str_t default_output_name_0 = {  };
   fx_str_t default_output_name_1 = {  };
   fx_str_t v_17 = {  };
   fx_str_t v_18 = {  };
   fx_str_t v_19 = {  };
   fx_str_t v_20 = {  };
   fx_str_t v_21 = {  };
   fx_str_t v_22 = {  };
   fx_str_t v_23 = {  };
   fx_str_t v_24 = {  };
   fx_str_t v_25 = {  };
   fx_str_t v_26 = {  };
   fx_str_t v_27 = {  };
   fx_str_t v_28 = {  };
   fx_str_t v_29 = {  };
   fx_str_t v_30 = {  };
   _fx_LS v_31 = 0;
   _fx_LS v_32 = 0;
   int fx_status = 0;
   FX_CALL(_fx_M7OptionsFM15default_optionsRM9options_t0(&v_0, 0), _fx_cleanup);
   _fx_free_R18Options__options_t(&_fx_g12Options__opt);
   _fx_copy_R18Options__options_t(&v_0, &_fx_g12Options__opt);
   _fx_g12Options__opt.arch64 = _fx_g18Options__is_arch64;
   FX_CALL(_fx_M3SysFM6getcwdS0(&curr_dir_0, 0), _fx_cleanup);
   FX_CALL(_fx_M4ListFM2tlLS1LS(_fx_g9Sys__argv, &args_0, 0), _fx_cleanup);
   fx_str_t slit_0 = FX_MAKE_STR("");
   fx_copy_str(&slit_0, &inputfile_0);
   int_ prhelp_0 = 0;
   bool prver_0 = false;
   bool ok_0 = true;
   while (args_0 != 0) {
      _fx_LS args_1 = 0;
      _fx_LS v_33 = 0;
      FX_COPY_PTR(args_0, &args_1);
      if (args_1 != 0) {
         fx_str_t slit_1 = FX_MAKE_STR("-no-preamble");
         if (fx_streq(&args_1->hd, &slit_1)) {
            _fx_g12Options__opt.use_preamble = false; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_2 = FX_MAKE_STR("-rebuild");
         if (fx_streq(&args_1->hd, &slit_2)) {
            _fx_g12Options__opt.force_rebuild = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_3 = FX_MAKE_STR("-pr-tokens");
         if (fx_streq(&args_1->hd, &slit_3)) {
            _fx_g12Options__opt.print_tokens = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_4 = FX_MAKE_STR("-pr-ast0");
         if (fx_streq(&args_1->hd, &slit_4)) {
            _fx_g12Options__opt.print_ast0 = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_5 = FX_MAKE_STR("-pr-ast");
         if (fx_streq(&args_1->hd, &slit_5)) {
            _fx_g12Options__opt.print_ast = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_6 = FX_MAKE_STR("-pr-k0");
         if (fx_streq(&args_1->hd, &slit_6)) {
            _fx_g12Options__opt.print_k0 = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_7 = FX_MAKE_STR("-pr-k");
         if (fx_streq(&args_1->hd, &slit_7)) {
            _fx_g12Options__opt.print_k = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_8 = FX_MAKE_STR("-no-c");
         if (fx_streq(&args_1->hd, &slit_8)) {
            _fx_g12Options__opt.gen_c = false; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_9 = FX_MAKE_STR("-app");
         if (fx_streq(&args_1->hd, &slit_9)) {
            _fx_g12Options__opt.make_app = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_10 = FX_MAKE_STR("-run");
         if (fx_streq(&args_1->hd, &slit_10)) {
            _fx_g12Options__opt.run_app = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_11 = FX_MAKE_STR("-O0");
         if (fx_streq(&args_1->hd, &slit_11)) {
            _fx_g12Options__opt.optimize_level = 0; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_12 = FX_MAKE_STR("-O1");
         if (fx_streq(&args_1->hd, &slit_12)) {
            _fx_g12Options__opt.optimize_level = 1; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_13 = FX_MAKE_STR("-O3");
         if (fx_streq(&args_1->hd, &slit_13)) {
            _fx_g12Options__opt.optimize_level = 3; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_14 = FX_MAKE_STR("-no-openmp");
         if (fx_streq(&args_1->hd, &slit_14)) {
            _fx_g12Options__opt.enable_openmp = false; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_15 = FX_MAKE_STR("-debug");
         if (fx_streq(&args_1->hd, &slit_15)) {
            _fx_g12Options__opt.debug = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_16 = FX_MAKE_STR("-optim-iters");
         if (fx_streq(&args_1->hd, &slit_16)) {
            _fx_LS v_34 = args_1->tl;
            if (v_34 != 0) {
               fx_str_t* i_0 = &v_34->hd;
               _fx_Nt6option1i v_35;
               _fx_M6StringFM6to_intNt6option1i1S(i_0, &v_35, 0);
               if (v_35.tag == _FX_Nt6option_Some) {
                  int_ i_1 = v_35.u.Some;
                  if (i_1 >= 0) {
                     _fx_g12Options__opt.optim_iters = i_1; FX_COPY_PTR(v_34->tl, &v_33); goto _fx_endmatch_0;
                  }
               }
               fx_str_t v_36 = {  };
               fx_str_t v_37 = {  };
               fx_str_t v_38 = {  };
               fx_str_t slit_17 = FX_MAKE_STR("[31;1merror:[0m");
               FX_CALL(_fx_F6stringS1S(&slit_17, &v_36, 0), _fx_catch_0);
               FX_CALL(_fx_F6stringS1S(i_0, &v_37, 0), _fx_catch_0);
               fx_str_t slit_18 = FX_MAKE_STR(" invalid -optim-iters arument ");
               fx_str_t slit_19 = FX_MAKE_STR(": must be a non-negative integer");
               {
                  const fx_str_t strs_0[] = { v_36, slit_18, v_37, slit_19 };
                  FX_CALL(fx_strjoin(0, 0, 0, strs_0, 4, &v_38), _fx_catch_0);
               }
               FX_CALL(_fx_F7printlnv1S(&v_38, 0), _fx_catch_0);
               ok_0 = false;

            _fx_catch_0: ;
               FX_FREE_STR(&v_38);
               FX_FREE_STR(&v_37);
               FX_FREE_STR(&v_36);

            _fx_endmatch_0: ;
               FX_CHECK_EXN(_fx_catch_1);

            _fx_catch_1: ;
               goto _fx_endmatch_4;
            }
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_20 = FX_MAKE_STR("-inline-threshold");
         if (fx_streq(&args_1->hd, &slit_20)) {
            _fx_LS v_39 = args_1->tl;
            if (v_39 != 0) {
               fx_str_t* i_2 = &v_39->hd;
               _fx_Nt6option1i v_40;
               _fx_M6StringFM6to_intNt6option1i1S(i_2, &v_40, 0);
               if (v_40.tag == _FX_Nt6option_Some) {
                  int_ i_3 = v_40.u.Some;
                  if (i_3 >= 0) {
                     _fx_g12Options__opt.inline_thresh = i_3; FX_COPY_PTR(v_39->tl, &v_33); goto _fx_endmatch_1;
                  }
               }
               fx_str_t v_41 = {  };
               fx_str_t v_42 = {  };
               fx_str_t v_43 = {  };
               fx_str_t slit_21 = FX_MAKE_STR("[31;1merror:[0m");
               FX_CALL(_fx_F6stringS1S(&slit_21, &v_41, 0), _fx_catch_2);
               FX_CALL(_fx_F6stringS1S(i_2, &v_42, 0), _fx_catch_2);
               fx_str_t slit_22 = FX_MAKE_STR(" invalid -inline-threshold arument ");
               fx_str_t slit_23 = FX_MAKE_STR(": must be a non-negative integer");
               {
                  const fx_str_t strs_1[] = { v_41, slit_22, v_42, slit_23 };
                  FX_CALL(fx_strjoin(0, 0, 0, strs_1, 4, &v_43), _fx_catch_2);
               }
               FX_CALL(_fx_F7printlnv1S(&v_43, 0), _fx_catch_2);
               ok_0 = false;

            _fx_catch_2: ;
               FX_FREE_STR(&v_43);
               FX_FREE_STR(&v_42);
               FX_FREE_STR(&v_41);

            _fx_endmatch_1: ;
               FX_CHECK_EXN(_fx_catch_3);

            _fx_catch_3: ;
               goto _fx_endmatch_4;
            }
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_24 = FX_MAKE_STR("-relax");
         if (fx_streq(&args_1->hd, &slit_24)) {
            _fx_g12Options__opt.relax = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_25 = FX_MAKE_STR("-Wno-unused");
         if (fx_streq(&args_1->hd, &slit_25)) {
            _fx_g12Options__opt.W_unused = false; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_26 = FX_MAKE_STR("-verbose");
         if (fx_streq(&args_1->hd, &slit_26)) {
            _fx_g12Options__opt.verbose = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_27 = FX_MAKE_STR("-o");
         if (fx_streq(&args_1->hd, &slit_27)) {
            _fx_LS v_44 = args_1->tl;
            if (v_44 != 0) {
               fx_str_t* v_45 = &_fx_g12Options__opt.output_name;
               fx_str_t* oname_0 = &v_44->hd;
               FX_FREE_STR(v_45);
               fx_copy_str(oname_0, v_45);
               FX_COPY_PTR(v_44->tl, &v_33);
               goto _fx_endmatch_4;
            }
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_28 = FX_MAKE_STR("-I");
         if (fx_streq(&args_1->hd, &slit_28)) {
            _fx_LS v_46 = args_1->tl;
            if (v_46 != 0) {
               _fx_LS v_47 = 0;
               _fx_LS v_48 = 0;
               _fx_LS v_49 = 0;
               FX_COPY_PTR(_fx_g12Options__opt.include_path, &v_47);
               FX_CALL(_fx_cons_LS(&v_46->hd, 0, true, &v_48), _fx_catch_4);
               FX_CALL(_fx_F7__add__LS2LSLS(v_47, v_48, &v_49, 0), _fx_catch_4);
               _fx_LS* v_50 = &_fx_g12Options__opt.include_path;
               _fx_free_LS(v_50);
               FX_COPY_PTR(v_49, v_50);
               FX_COPY_PTR(v_46->tl, &v_33);

            _fx_catch_4: ;
               if (v_49) {
                  _fx_free_LS(&v_49);
               }
               if (v_48) {
                  _fx_free_LS(&v_48);
               }
               if (v_47) {
                  _fx_free_LS(&v_47);
               }
               goto _fx_endmatch_4;
            }
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_29 = FX_MAKE_STR("-B");
         if (fx_streq(&args_1->hd, &slit_29)) {
            _fx_LS v_51 = args_1->tl;
            if (v_51 != 0) {
               fx_str_t* v_52 = &_fx_g12Options__opt.build_rootdir;
               fx_str_t* bdir_0 = &v_51->hd;
               FX_FREE_STR(v_52);
               fx_copy_str(bdir_0, v_52);
               FX_COPY_PTR(v_51->tl, &v_33);
               goto _fx_endmatch_4;
            }
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_30 = FX_MAKE_STR("-c++");
         if (fx_streq(&args_1->hd, &slit_30)) {
            _fx_g12Options__opt.compile_by_cpp = true; FX_COPY_PTR(args_1->tl, &v_33); goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_31 = FX_MAKE_STR("-cflags");
         if (fx_streq(&args_1->hd, &slit_31)) {
            _fx_LS v_53 = args_1->tl;
            if (v_53 != 0) {
               fx_str_t v_54 = {  };
               fx_str_t v_55 = {  };
               fx_str_t v_56 = {  };
               fx_str_t* cflags_0 = &v_53->hd;
               fx_copy_str(&_fx_g12Options__opt.cflags, &v_54);
               if (FX_STR_LENGTH(v_54) == 0) {
                  fx_copy_str(cflags_0, &v_55);
               }
               else {
                  fx_copy_str(&_fx_g12Options__opt.cflags, &v_56);
                  fx_str_t slit_32 = FX_MAKE_STR(" ");
                  {
                     const fx_str_t strs_2[] = { v_56, slit_32, *cflags_0 };
                     FX_CALL(fx_strjoin(0, 0, 0, strs_2, 3, &v_55), _fx_catch_5);
                  }
               }
               fx_str_t* v_57 = &_fx_g12Options__opt.cflags;
               FX_FREE_STR(v_57);
               fx_copy_str(&v_55, v_57);
               FX_COPY_PTR(v_53->tl, &v_33);

            _fx_catch_5: ;
               FX_FREE_STR(&v_56);
               FX_FREE_STR(&v_55);
               FX_FREE_STR(&v_54);
               goto _fx_endmatch_4;
            }
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_33 = FX_MAKE_STR("-clibs");
         if (fx_streq(&args_1->hd, &slit_33)) {
            _fx_LS v_58 = args_1->tl;
            if (v_58 != 0) {
               fx_str_t v_59 = {  };
               fx_str_t v_60 = {  };
               fx_str_t v_61 = {  };
               fx_str_t* clibs_0 = &v_58->hd;
               fx_copy_str(&_fx_g12Options__opt.clibs, &v_59);
               if (FX_STR_LENGTH(v_59) == 0) {
                  fx_copy_str(clibs_0, &v_60);
               }
               else {
                  fx_copy_str(&_fx_g12Options__opt.clibs, &v_61);
                  fx_str_t slit_34 = FX_MAKE_STR(" ");
                  {
                     const fx_str_t strs_3[] = { v_61, slit_34, *clibs_0 };
                     FX_CALL(fx_strjoin(0, 0, 0, strs_3, 3, &v_60), _fx_catch_6);
                  }
               }
               fx_str_t* v_62 = &_fx_g12Options__opt.clibs;
               FX_FREE_STR(v_62);
               fx_copy_str(&v_60, v_62);
               FX_COPY_PTR(v_58->tl, &v_33);

            _fx_catch_6: ;
               FX_FREE_STR(&v_61);
               FX_FREE_STR(&v_60);
               FX_FREE_STR(&v_59);
               goto _fx_endmatch_4;
            }
         }
      }
      bool res_0;
      if (args_1 != 0) {
         fx_str_t slit_35 = FX_MAKE_STR("-h");
         if (fx_streq(&args_1->hd, &slit_35)) {
            res_0 = true; goto _fx_endmatch_2;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_36 = FX_MAKE_STR("-help");
         if (fx_streq(&args_1->hd, &slit_36)) {
            res_0 = true; goto _fx_endmatch_2;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_37 = FX_MAKE_STR("--help");
         if (fx_streq(&args_1->hd, &slit_37)) {
            res_0 = true; goto _fx_endmatch_2;
         }
      }
      res_0 = false;

   _fx_endmatch_2: ;
      FX_CHECK_EXN(_fx_catch_8);
      if (res_0) {
         prhelp_0 = 2; goto _fx_endmatch_4;
      }
      bool res_1;
      if (args_1 != 0) {
         fx_str_t slit_38 = FX_MAKE_STR("-v");
         if (fx_streq(&args_1->hd, &slit_38)) {
            res_1 = true; goto _fx_endmatch_3;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_39 = FX_MAKE_STR("-version");
         if (fx_streq(&args_1->hd, &slit_39)) {
            res_1 = true; goto _fx_endmatch_3;
         }
      }
      if (args_1 != 0) {
         fx_str_t slit_40 = FX_MAKE_STR("--version");
         if (fx_streq(&args_1->hd, &slit_40)) {
            res_1 = true; goto _fx_endmatch_3;
         }
      }
      res_1 = false;

   _fx_endmatch_3: ;
      FX_CHECK_EXN(_fx_catch_8);
      if (res_1) {
         prver_0 = true; goto _fx_endmatch_4;
      }
      if (args_1 != 0) {
         fx_str_t slit_41 = FX_MAKE_STR("--");
         if (fx_streq(&args_1->hd, &slit_41)) {
            _fx_LS* v_63 = &_fx_g12Options__opt.app_args;
            _fx_LS* next_0 = &args_1->tl;
            _fx_free_LS(v_63);
            FX_COPY_PTR(*next_0, v_63);
            goto _fx_endmatch_4;
         }
      }
      if (args_1 != 0) {
         _fx_LS v_64 = 0;
         fx_str_t v_65 = {  };
         fx_str_t v_66 = {  };
         fx_str_t v_67 = {  };
         fx_str_t v_68 = {  };
         fx_str_t v_69 = {  };
         fx_str_t v_70 = {  };
         fx_str_t v_71 = {  };
         _fx_LS v_72 = 0;
         fx_str_t v_73 = {  };
         fx_str_t v_74 = {  };
         fx_str_t* a_0 = &args_1->hd;
         bool v_75;
         fx_str_t slit_42 = FX_MAKE_STR("-");
         v_75 = _fx_M6StringFM10startswithB2SS(a_0, &slit_42, 0);
         if (v_75) {
            fx_str_t slit_43 = FX_MAKE_STR("-clibs");
            FX_CALL(_fx_cons_LS(&slit_43, 0, true, &v_64), _fx_catch_7);
            fx_str_t slit_44 = FX_MAKE_STR("-cflags");
            FX_CALL(_fx_cons_LS(&slit_44, v_64, false, &v_64), _fx_catch_7);
            fx_str_t slit_45 = FX_MAKE_STR("-B");
            FX_CALL(_fx_cons_LS(&slit_45, v_64, false, &v_64), _fx_catch_7);
            fx_str_t slit_46 = FX_MAKE_STR("-o");
            FX_CALL(_fx_cons_LS(&slit_46, v_64, false, &v_64), _fx_catch_7);
            fx_str_t slit_47 = FX_MAKE_STR("-inline-threshold");
            FX_CALL(_fx_cons_LS(&slit_47, v_64, false, &v_64), _fx_catch_7);
            bool v_76;
            FX_CALL(_fx_M4ListFM3memB2LSS(v_64, a_0, &v_76, 0), _fx_catch_7);
            if (v_76) {
               fx_str_t slit_48 = FX_MAKE_STR("[31;1merror:[0m");
               FX_CALL(_fx_F6stringS1S(&slit_48, &v_65, 0), _fx_catch_7);
               FX_CALL(_fx_F6stringS1S(a_0, &v_66, 0), _fx_catch_7);
               fx_str_t slit_49 = FX_MAKE_STR(" option ");
               fx_str_t slit_50 = FX_MAKE_STR(" needs an argument");
               {
                  const fx_str_t strs_4[] = { v_65, slit_49, v_66, slit_50 };
                  FX_CALL(fx_strjoin(0, 0, 0, strs_4, 4, &v_67), _fx_catch_7);
               }
               FX_CALL(_fx_F7printlnv1S(&v_67, 0), _fx_catch_7);
            }
            else {
               fx_str_t slit_51 = FX_MAKE_STR("[31;1merror:[0m");
               FX_CALL(_fx_F6stringS1S(&slit_51, &v_68, 0), _fx_catch_7);
               FX_CALL(_fx_F6stringS1S(a_0, &v_69, 0), _fx_catch_7);
               fx_str_t slit_52 = FX_MAKE_STR(" unrecognized option ");
               {
                  const fx_str_t strs_5[] = { v_68, slit_52, v_69 };
                  FX_CALL(fx_strjoin(0, 0, 0, strs_5, 3, &v_70), _fx_catch_7);
               }
               FX_CALL(_fx_F7printlnv1S(&v_70, 0), _fx_catch_7);
            }
            ok_0 = false;
         }
         else if (FX_STR_LENGTH(inputfile_0) == 0) {
            FX_FREE_STR(&inputfile_0); fx_copy_str(a_0, &inputfile_0); FX_COPY_PTR(args_1->tl, &v_33);
         }
         else {
            fx_str_t slit_53 = FX_MAKE_STR("[31;1merror:[0m");
            FX_CALL(_fx_F6stringS1S(&slit_53, &v_71, 0), _fx_catch_7);
            FX_CALL(_fx_cons_LS(a_0, 0, true, &v_72), _fx_catch_7);
            FX_CALL(_fx_cons_LS(&inputfile_0, v_72, false, &v_72), _fx_catch_7);
            FX_CALL(_fx_F6stringS1LS(v_72, &v_73, 0), _fx_catch_7);
            fx_str_t slit_54 = FX_MAKE_STR(" more than one input file is specified: ");
            {
               const fx_str_t strs_6[] = { v_71, slit_54, v_73 };
               FX_CALL(fx_strjoin(0, 0, 0, strs_6, 3, &v_74), _fx_catch_7);
            }
            FX_CALL(_fx_F7printlnv1S(&v_74, 0), _fx_catch_7);
            ok_0 = false;
         }

      _fx_catch_7: ;
         FX_FREE_STR(&v_74);
         FX_FREE_STR(&v_73);
         if (v_72) {
            _fx_free_LS(&v_72);
         }
         FX_FREE_STR(&v_71);
         FX_FREE_STR(&v_70);
         FX_FREE_STR(&v_69);
         FX_FREE_STR(&v_68);
         FX_FREE_STR(&v_67);
         FX_FREE_STR(&v_66);
         FX_FREE_STR(&v_65);
         if (v_64) {
            _fx_free_LS(&v_64);
         }
         goto _fx_endmatch_4;
      }
      FX_FAST_THROW(FX_EXN_NoMatchError, _fx_catch_8);

   _fx_endmatch_4: ;
      FX_CHECK_EXN(_fx_catch_8);
      _fx_free_LS(&args_0);
      FX_COPY_PTR(v_33, &args_0);

   _fx_catch_8: ;
      if (v_33) {
         _fx_free_LS(&v_33);
      }
      if (args_1) {
         _fx_free_LS(&args_1);
      }
      FX_CHECK_EXN(_fx_cleanup);
   }
   if (_fx_g12Options__opt.optim_iters <= 0) {
      int_ t_0;
      if (_fx_g12Options__opt.optimize_level == 3) {
         t_0 = 3;
      }
      else {
         t_0 = 2;
      }
      _fx_g12Options__opt.optim_iters = t_0;
   }
   int_ res_2;
   FX_CALL(_fx_F3maxi2ii(_fx_g12Options__opt.optim_iters, 2, &res_2, 0), _fx_cleanup);
   _fx_g12Options__opt.optim_iters = res_2;
   bool t_1;
   if (!prver_0) {
      t_1 = prhelp_0 == 0;
   }
   else {
      t_1 = false;
   }
   bool t_2;
   if (t_1) {
      t_2 = ok_0;
   }
   else {
      t_2 = false;
   }
   if (t_2) {
      if (FX_STR_LENGTH(inputfile_0) == 0) {
         FX_CALL(_fx_M4ListFM2tlLS1LS(_fx_g9Sys__argv, &v_1, 0), _fx_cleanup);
         if (v_1 != 0) {
            fx_str_t slit_55 = FX_MAKE_STR("[31;1merror:[0m");
            FX_CALL(_fx_F6stringS1S(&slit_55, &v_2, 0), _fx_cleanup);
            fx_str_t slit_56 = FX_MAKE_STR(" input file name is missing");
            {
               const fx_str_t strs_7[] = { v_2, slit_56 };
               FX_CALL(fx_strjoin(0, 0, 0, strs_7, 2, &v_3), _fx_cleanup);
            }
            FX_CALL(_fx_F7printlnv1S(&v_3, 0), _fx_cleanup);
            ok_0 = false;
         }
         else {
            prhelp_0 = 1;
         }
      }
      bool t_3;
      if (_fx_g12Options__opt.run_app) {
         t_3 = true;
      }
      else {
         t_3 = _fx_g12Options__opt.compile_by_cpp;
      }
      bool t_4;
      if (t_3) {
         t_4 = !_fx_g12Options__opt.gen_c;
      }
      else {
         t_4 = false;
      }
      if (t_4) {
         fx_str_t slit_57 = FX_MAKE_STR("[31;1merror:[0m");
         FX_CALL(_fx_F6stringS1S(&slit_57, &v_4, 0), _fx_cleanup);
         fx_str_t slit_58 = FX_MAKE_STR(" -no-c option cannot be used together with -run or -c++");
         {
            const fx_str_t strs_8[] = { v_4, slit_58 };
            FX_CALL(fx_strjoin(0, 0, 0, strs_8, 2, &v_5), _fx_cleanup);
         }
         FX_CALL(_fx_F7printlnv1S(&v_5, 0), _fx_cleanup);
         ok_0 = false;
      }
   }
   if (prver_0) {
      FX_CALL(_fx_F6stringS1S(&_fx_g21__ficus_version_str__, &v_6, 0), _fx_cleanup);
      FX_CALL(_fx_F6stringS1S(&_fx_g20__ficus_git_commit__, &v_7, 0), _fx_cleanup);
      fx_str_t slit_59 = FX_MAKE_STR("Ficus version: ");
      fx_str_t slit_60 = FX_MAKE_STR(" (git commit: ");
      fx_str_t slit_61 = FX_MAKE_STR(")");
      {
         const fx_str_t strs_9[] = { slit_59, v_6, slit_60, v_7, slit_61 };
         FX_CALL(fx_strjoin(0, 0, 0, strs_9, 5, &v_8), _fx_cleanup);
      }
      FX_CALL(_fx_F7printlnv1S(&v_8, 0), _fx_cleanup);
      FX_CALL(_fx_g11Sys__osname.fp(true, &v_9, _fx_g11Sys__osname.fcv), _fx_cleanup);
      FX_CALL(_fx_F6stringS1S(&v_9, &v_10, 0), _fx_cleanup);
      fx_str_t slit_62 = FX_MAKE_STR("Plaform: ");
      {
         const fx_str_t strs_10[] = { slit_62, v_10 };
         FX_CALL(fx_strjoin(0, 0, 0, strs_10, 2, &v_11), _fx_cleanup);
      }
      FX_CALL(_fx_F7printlnv1S(&v_11, 0), _fx_cleanup);
      FX_CALL(_fx_M3SysFM10cc_versionS0(&v_12, 0), _fx_cleanup);
      FX_CALL(_fx_F6stringS1S(&v_12, &v_13, 0), _fx_cleanup);
      fx_str_t slit_63 = FX_MAKE_STR("C/C++ Compiler: ");
      {
         const fx_str_t strs_11[] = { slit_63, v_13 };
         FX_CALL(fx_strjoin(0, 0, 0, strs_11, 2, &v_14), _fx_cleanup);
      }
      FX_CALL(_fx_F7printlnv1S(&v_14, 0), _fx_cleanup);
      *fx_result = false;
   }
   else if (prhelp_0 > 0) {
      FX_CALL(_fx_M7OptionsFM10print_helpv1B(prhelp_0 > 1, 0), _fx_cleanup); *fx_result = false;
   }
   else if (ok_0) {
      if (_fx_g12Options__opt.optimize_level == 0) {
         _fx_g12Options__opt.inline_thresh = 1;
      }
      FX_CALL(_fx_M8FilenameFM9normalizeS2SS(&curr_dir_0, &inputfile_0, &v_15, 0), _fx_cleanup);
      fx_str_t* v_77 = &_fx_g12Options__opt.filename;
      FX_FREE_STR(v_77);
      fx_copy_str(&v_15, v_77);
      fx_copy_str(&_fx_g12Options__opt.filename, &v_16);
      FX_CALL(_fx_M8FilenameFM8basenameS1S(&v_16, &default_output_name_0, 0), _fx_cleanup);
      FX_CALL(_fx_M8FilenameFM16remove_extensionS1S(&default_output_name_0, &default_output_name_1, 0), _fx_cleanup);
      fx_copy_str(&_fx_g12Options__opt.build_rootdir, &v_17);
      FX_CALL(_fx_M8FilenameFM9normalizeS2SS(&curr_dir_0, &v_17, &v_18, 0), _fx_cleanup);
      fx_str_t* v_78 = &_fx_g12Options__opt.build_rootdir;
      FX_FREE_STR(v_78);
      fx_copy_str(&v_18, v_78);
      fx_copy_str(&_fx_g12Options__opt.build_rootdir, &v_19);
      fx_str_t slit_64 = FX_MAKE_STR("__fxbuild__");
      FX_CALL(_fx_M8FilenameFM9normalizeS2SS(&v_19, &slit_64, &v_20, 0), _fx_cleanup);
      fx_str_t* v_79 = &_fx_g12Options__opt.build_rootdir;
      FX_FREE_STR(v_79);
      fx_copy_str(&v_20, v_79);
      fx_copy_str(&_fx_g12Options__opt.output_name, &v_21);
      if (FX_STR_LENGTH(v_21) != 0) {
         fx_copy_str(&_fx_g12Options__opt.output_name, &v_22);
      }
      else {
         fx_copy_str(&default_output_name_1, &v_22);
      }
      fx_str_t* v_80 = &_fx_g12Options__opt.app_filename;
      FX_FREE_STR(v_80);
      fx_copy_str(&v_22, v_80);
      fx_copy_str(&_fx_g12Options__opt.build_rootdir, &v_23);
      fx_copy_str(&_fx_g12Options__opt.app_filename, &v_24);
      FX_CALL(_fx_M8FilenameFM8basenameS1S(&v_24, &v_25, 0), _fx_cleanup);
      FX_CALL(_fx_M8FilenameFM9normalizeS2SS(&v_23, &v_25, &v_26, 0), _fx_cleanup);
      fx_str_t* v_81 = &_fx_g12Options__opt.build_dir;
      FX_FREE_STR(v_81);
      fx_copy_str(&v_26, v_81);
      fx_copy_str(&_fx_g12Options__opt.output_name, &v_27);
      if (FX_STR_LENGTH(v_27) == 0) {
         fx_copy_str(&_fx_g12Options__opt.build_dir, &v_28);
         fx_copy_str(&_fx_g12Options__opt.app_filename, &v_29);
         FX_CALL(_fx_M8FilenameFM9normalizeS2SS(&v_28, &v_29, &v_30, 0), _fx_cleanup);
         fx_str_t* v_82 = &_fx_g12Options__opt.app_filename;
         FX_FREE_STR(v_82);
         fx_copy_str(&v_30, v_82);
      }
      FX_COPY_PTR(_fx_g12Options__opt.app_args, &v_31);
      FX_CALL(_fx_M4ListFM3revLS1LS(v_31, &v_32, 0), _fx_cleanup);
      _fx_LS* v_83 = &_fx_g12Options__opt.app_args;
      _fx_free_LS(v_83);
      FX_COPY_PTR(v_32, v_83);
      *fx_result = true;
   }
   else {
      *fx_result = false;
   }

_fx_cleanup: ;
   _fx_free_R18Options__options_t(&v_0);
   FX_FREE_STR(&curr_dir_0);
   if (args_0) {
      _fx_free_LS(&args_0);
   }
   FX_FREE_STR(&inputfile_0);
   if (v_1) {
      _fx_free_LS(&v_1);
   }
   FX_FREE_STR(&v_2);
   FX_FREE_STR(&v_3);
   FX_FREE_STR(&v_4);
   FX_FREE_STR(&v_5);
   FX_FREE_STR(&v_6);
   FX_FREE_STR(&v_7);
   FX_FREE_STR(&v_8);
   FX_FREE_STR(&v_9);
   FX_FREE_STR(&v_10);
   FX_FREE_STR(&v_11);
   FX_FREE_STR(&v_12);
   FX_FREE_STR(&v_13);
   FX_FREE_STR(&v_14);
   FX_FREE_STR(&v_15);
   FX_FREE_STR(&v_16);
   FX_FREE_STR(&default_output_name_0);
   FX_FREE_STR(&default_output_name_1);
   FX_FREE_STR(&v_17);
   FX_FREE_STR(&v_18);
   FX_FREE_STR(&v_19);
   FX_FREE_STR(&v_20);
   FX_FREE_STR(&v_21);
   FX_FREE_STR(&v_22);
   FX_FREE_STR(&v_23);
   FX_FREE_STR(&v_24);
   FX_FREE_STR(&v_25);
   FX_FREE_STR(&v_26);
   FX_FREE_STR(&v_27);
   FX_FREE_STR(&v_28);
   FX_FREE_STR(&v_29);
   FX_FREE_STR(&v_30);
   if (v_31) {
      _fx_free_LS(&v_31);
   }
   if (v_32) {
      _fx_free_LS(&v_32);
   }
   return fx_status;
}

FX_EXTERN_C int fx_init_Options(void)
{
   int fx_status = 0;
   FX_CALL(_fx_M7OptionsFM15default_optionsRM9options_t0(&_fx_g12Options__opt, 0), _fx_cleanup);

_fx_cleanup: ;
   return fx_status;
}

FX_EXTERN_C void fx_deinit_Options(void)
{
   _fx_free_R18Options__options_t(&_fx_g12Options__opt);
}

